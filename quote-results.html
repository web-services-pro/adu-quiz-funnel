<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your 2026 ADU Quote Estimate Range - SAMS Construction Group LLC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background-color: #020617; font-family: 'Inter', sans-serif; color: #f8fafc; } 
        .glass-panel { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(71, 85, 105, 0.6); }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
    <!-- Meta Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window,document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');

        // 1. Retrieve Lead Info from LocalStorage
        const leadData = JSON.parse(localStorage.getItem('adu_lead_data') || '{}');
        const userEmail = leadData.email ? leadData.email.toLowerCase().trim() : null;
        const userPhone = leadData.phone ? leadData.phone.replace(/\D/g, '') : null;

        // 2. Initialize with Advanced Matching Data
        fbq('init', '764970315154958', {
            em: userEmail,
            ph: userPhone
        }); 
    
        fbq('track', 'PageView');
    
        // 3. Track Lead with Parameters
        fbq('track', 'Lead', {
            content_name: 'ADU Quote Result',
            status: 'Quiz Completed'
        });
    </script>
    <noscript>
     <img height="1" width="1" 
    src="https://www.facebook.com/tr?id=764970315154958&ev=PageView
    &noscript=1"/>
    </noscript>
    <!-- End Meta Pixel Code -->
</head>
<body class="min-h-screen p-4 md:p-8">
    <div class="max-w-3xl mx-auto">
        
        <div class="text-center mb-10">
            <img src="images/logo-SAMS-Constr-Logo.jpg" alt="SAMS Construction Group" class="h-20 mx-auto mb-6 object-contain">
            <h1 class="text-3xl md:text-5xl font-bold mb-4 text-white">Your ADU Project Estimated Price Range</h1>
            <p class="text-slate-400 text-lg">Estimate Range based on 2026 Los Angeles market data.</p>
        </div>

        <div class="bg-slate-900/80 border border-slate-700 rounded-2xl p-8 mb-12 text-center relative overflow-hidden shadow-2xl">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-purple-500"></div>
            
            <div id="loadingPrice" class="py-4">
                <i class="fas fa-circle-notch fa-spin text-4xl text-blue-500"></i>
                <p class="text-slate-400 mt-2">Calculating Estimate...</p>
            </div>

            <div id="priceDisplay" class="hidden fade-in">
                <div class="flex justify-center items-center gap-2 mb-2 flex-wrap">
                    <span class="text-5xl md:text-6xl font-black text-green-400 tracking-tight">$<span id="lowPrice">0</span></span>
                    <span class="text-2xl text-slate-500 font-bold">-</span>
                    <span class="text-5xl md:text-6xl font-black text-green-400 tracking-tight">$<span id="highPrice">0</span></span>
                </div>
                <p class="text-sm text-slate-400 uppercase tracking-wide font-medium">Estimated Project Total</p>
            </div>
        </div>

        <h2 class="text-2xl font-bold text-white mb-6 pl-3 border-l-4 border-blue-500">Detailed Project Breakdown</h2>
        <div id="breakdown" class="space-y-4 mb-12">
            </div>

        <h2 class="text-2xl font-bold text-white mb-6 pl-3 border-l-4 border-yellow-500">What Others Are Saying</h2>
        <div class="relative w-full max-w-4xl mx-auto mb-12 overflow-hidden rounded-xl border border-slate-700 shadow-2xl group">
            <div class="flex transition-transform duration-500" id="testimonialTrack">
                <div class="min-w-full"><img src="images/review-0-SAMS-Review3.png" class="w-full h-[300px] object-contain bg-slate-900"></div>
                <div class="min-w-full"><img src="images/review-1-SAMS-Review2.png" class="w-full h-[300px] object-contain bg-slate-900"></div>
                <div class="min-w-full"><img src="images/review-2-SAMS-Review1.png" class="w-full h-[300px] object-contain bg-slate-900"></div>
            </div>
            <button onclick="moveTestimonial(-1)" class="absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 p-3 rounded-full text-white hover:bg-black/80">❮</button>
            <button onclick="moveTestimonial(1)" class="absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 p-3 rounded-full text-white hover:bg-black/80">❯</button>
        </div>
        <script>
            let testIndex = 0;
            const tTrack = document.getElementById('testimonialTrack');
            const tCount = 3;
            function moveTestimonial(n) {
                testIndex = (testIndex + n + tCount) % tCount;
                tTrack.style.transform = 'translateX(-' + (testIndex * 100) + '%)';
            }
        </script>

        <h2 class="text-2xl font-bold text-white mb-6 pl-3 border-l-4 border-blue-500">Check Out Our Recent Work!</h2>
        <div class="relative w-full max-w-4xl mx-auto mb-12 overflow-hidden rounded-xl border border-slate-700 shadow-2xl">
            <div class="flex transition-transform duration-500" id="portfolioTrack"><div class="min-w-full"><img src="images/portfolio-0-Calabasas.webp" class="w-full h-[400px] object-cover"></div><div class="min-w-full"><img src="images/portfolio-1-WhatsApp-Image-2026-01-23-at-5.17.45-PM-(1).jpeg" class="w-full h-[400px] object-cover"></div><div class="min-w-full"><img src="images/portfolio-2-WhatsApp-Image-2026-01-23-at-5.17.45-PM.jpeg" class="w-full h-[400px] object-cover"></div><div class="min-w-full"><img src="images/portfolio-3-WhatsApp-Image-2026-01-23-at-5.17.46-PM-(2).jpeg" class="w-full h-[400px] object-cover"></div><div class="min-w-full"><img src="images/portfolio-4-WhatsApp-Image-2026-01-23-at-5.18.40-PM-(3).jpeg" class="w-full h-[400px] object-cover"></div><div class="min-w-full"><img src="images/portfolio-5-WhatsApp-Image-2026-01-23-at-5.18.40-PM-(8).jpeg" class="w-full h-[400px] object-cover"></div><div class="min-w-full"><img src="images/portfolio-6-WhatsApp-Image-2026-01-23-at-5.19.07-PM-(3).jpeg" class="w-full h-[400px] object-cover"></div><div class="min-w-full"><img src="images/portfolio-7-WhatsApp-Image-2026-01-23-at-5.19.07-PM-(7).jpeg" class="w-full h-[400px] object-cover"></div><div class="min-w-full"><img src="images/portfolio-8-WhatsApp-Image-2026-01-23-at-5.19.08-PM-(2).jpeg" class="w-full h-[400px] object-cover"></div><div class="min-w-full"><img src="images/portfolio-9-WhatsApp-Image-2026-01-23-at-5.19.08-PM-(4).jpeg" class="w-full h-[400px] object-cover"></div><div class="min-w-full"><img src="images/portfolio-10-WhatsApp-Image-2026-01-23-at-5.19.08-PM.jpeg" class="w-full h-[400px] object-cover"></div><div class="min-w-full"><img src="images/portfolio-11-WhatsApp-Image-2026-01-23-at-5.19.25-PM.jpeg" class="w-full h-[400px] object-cover"></div></div>
            <button onclick="moveSlide(-1)" class="absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 p-3 rounded-full text-white hover:bg-black/80">❮</button>
            <button onclick="moveSlide(1)" class="absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 p-3 rounded-full text-white hover:bg-black/80">❯</button>
        </div>
        <script>
            let slideIndex = 0;
            const track = document.getElementById('portfolioTrack');
            const count = 12;
            function moveSlide(n) {
                slideIndex = (slideIndex + n + count) % count;
                track.style.transform = 'translateX(-' + (slideIndex * 100) + '%)';
            }
        </script>

        <h2 class="text-2xl font-bold text-white mb-6 pl-3 border-l-4 border-teal-500">Frequently Asked Questions</h2>
        <div class="space-y-4 mb-12">
            <div class="glass-panel p-6 rounded-xl border border-slate-700">
                <h4 class="font-bold text-white text-lg mb-2"><i class="far fa-question-circle text-teal-400 mr-2"></i>What warranties or guarantees do you offer?</h4>
                <p class="text-slate-300 text-sm leading-relaxed">We stand behind our craftsmanship with a full 1-year warranty on all work performed, giving you peace of mind that your project is built to last.</p>
            </div>
            <div class="glass-panel p-6 rounded-xl border border-slate-700">
                <h4 class="font-bold text-white text-lg mb-2"><i class="far fa-question-circle text-teal-400 mr-2"></i>Do you offer financing?</h4>
                <p class="text-slate-300 text-sm leading-relaxed">Yes! We offer 0% financing for up to 12 months on approved credit (OAC). We also offer flexible payment plans tailored to project milestones.</p>
            </div>
            <div class="glass-panel p-6 rounded-xl border border-slate-700">
                <h4 class="font-bold text-white text-lg mb-2"><i class="far fa-question-circle text-teal-400 mr-2"></i>Why choose SAMS Construction?</h4>
                <p class="text-slate-300 text-sm leading-relaxed">For over 22 years, Clients have been choosing us for our high-quality workmanship and speed. We pride ourselves on very fast completion times without cutting corners.</p>
            </div>
            <div class="glass-panel p-6 rounded-xl border border-slate-700">
                <h4 class="font-bold text-white text-lg mb-2"><i class="far fa-question-circle text-teal-400 mr-2"></i>Do you have any current specials?</h4>
                <p class="text-slate-300 text-sm leading-relaxed">Yes! All Estimates and Consultations are free. We currently offer <strong>$2,500 OFF full kitchen remodels</strong> and <strong>$1,000 OFF full bathroom remodels</strong>. ADU clients get <strong>FREE kitchen cabinets</strong> if signed within 30 days.</p>
            </div>
        </div>

        <div class="bg-gradient-to-br from-blue-900/40 to-slate-900/40 border border-blue-500/50 p-8 md:p-10 rounded-2xl text-center mt-12 shadow-2xl relative overflow-hidden group">
            <div class="absolute inset-0 bg-blue-600/5 group-hover:bg-blue-600/10 transition-colors duration-500"></div>
            <div class="relative z-10">
                <h3 class="text-3xl md:text-4xl font-extrabold mb-4 text-white tracking-tight">Ready to Get Your Official ADU Estimate? Let's Lock In Your Numbers</h3>
                <p class="text-slate-300 mb-6 text-lg leading-relaxed max-w-2xl mx-auto">
                    Great news! Your preliminary quote range gives you a solid starting point.
                </p>
                <p class="text-slate-300 mb-6 text-lg leading-relaxed max-w-2xl mx-auto">
                    Now let's get precise. During your free onsite consultation, we'll:<br>
                    <span class="inline-block mt-3 text-left max-w-xl mx-auto">
                        ✓ Verify exact measurements for your property<br>
                        ✓ Identify potential cost savings you might have missed<br>
                        ✓ Lock in current material pricing (before the next price fluctuation)<br>
                        ✓ Create your official ADU estimate
                    </span>
                </p>
                <p class="text-slate-300 mb-8 text-lg leading-relaxed max-w-2xl mx-auto">
                    <span class="text-teal-400 font-bold">Why book now?</span> Material costs change weekly and our calendar fills 4-6 weeks out. The sooner we measure, the sooner you can move forward with confidence.<br class="hidden md:block">
                    <span class="text-slate-400 italic mt-2 inline-block">Zero obligation. Zero pressure. Just accurate numbers you can trust.</span>
                </p>
                <a href="https://calendar.app.google/oDBvCkubBHPgbsZc7" target="_blank" class="inline-flex items-center gap-3 bg-green-600 hover:bg-green-500 text-white text-xl font-bold py-5 px-12 rounded-xl transition-all shadow-[0_0_20px_rgba(34,197,94,0.3)] hover:shadow-[0_0_30px_rgba(34,197,94,0.5)] transform hover:-translate-y-1">
                    <span>Schedule My Official Estimate</span>
                    <i class="fas fa-arrow-right"></i>
                </a>
                <p class="mt-6 text-xs text-slate-500 uppercase tracking-widest font-semibold"><i class="fas fa-lock text-slate-600 mr-1"></i> No Obligation • 100% Free • Secure Your Spot</p>
            </div>
        </div>
    </div>

    <script>
        // --- 1. CONFIGURATION ---
        const WEBHOOK_URL = "https://script.google.com/macros/s/AKfycbwRdV_yj3lH-9J67YaodX0B1HRk8GeeAiPzmVPCimrKoqCZ6UwqAf3h8CVnbcQb0k_O/exec";

        // Fallback Pricing (Offline)
        let PRICING = {
            base_sqft_garage: 225, base_sqft_attached: 310, base_sqft_detached: 350,
            finish_mid_markup: 1.15, finish_high_markup: 1.35,
            site_slope_mod: 12000, site_demo: 6500,
            util_tie_in: 2500, util_new_lines: 12500,
            panel_upgrade: 4200, roof_tile_sqft: 14, ceil_vault_sqft: 18,
            door_bifold: 9500, hvac_central: 6500, plans_soft_cost: 7500, permit_fees: 5500
        };

        const params = new URLSearchParams(window.location.search);
        const inputs = Object.fromEntries(params.entries());

        // --- 2. BREAKDOWN DESCRIPTIONS (Persuasive/Strategic Copy) ---
        const descriptions = {
            // Q1: ADU Type
            q1: {
                "detached": { 
                    title: "ADU Type", 
                    subtitle: "Detached New Construction",
                    copy: "Garage conversions are typically the most cost-effective option as they use an existing structure. New detached ADUs offer more design flexibility but involve higher costs for foundations, framing, and utility connections. Your choice maximizes privacy and creates a distinct, separate asset that significantly boosts property value and rental potential."
                },
                "attached": { 
                    title: "ADU Type", 
                    subtitle: "Attached Addition",
                    copy: "Garage conversions are typically the most cost-effective option as they use an existing structure. New detached ADUs offer more design flexibility but involve higher costs for foundations, framing, and utility connections. An attached unit is a strategic, efficient choice—by sharing a wall with your main house, you reduce utility trenching costs while maximizing usable backyard space."
                },
                "garage_conversion": { 
                    title: "ADU Type", 
                    subtitle: "Garage Conversion (Existing Structure)",
                    copy: "Garage conversions are typically the most cost-effective option as they use an existing structure. New detached ADUs offer more design flexibility but involve higher costs for foundations, framing, and utility connections. You've chosen the highest ROI option—by utilizing the existing shell, you bypass major framing and foundation costs and can complete the project significantly faster."
                }
            },

            // Q2: Square Footage
            q2: { 
                title: "Square Footage", 
                subtitle: val => `Approximately ${val} sq ft`,
                copy: val => `Size is the largest driver of total cost. While larger ADUs cost more overall, they often have a slightly lower price per square foot due to efficiencies of scale in materials and labor. Your ${val} sq ft layout is optimized for efficient, livable space that maximizes functionality without wasting square footage on unnecessary areas.`
            },

            // Q3: Finish Level
            q3: {
                "standard": { 
                    title: "Finish Level", 
                    subtitle: "Standard Builder-Grade",
                    copy: "Your choice of finishes directly impacts the budget. Builder-grade is budget-friendly, while high-end options like custom cabinetry, stone countertops, and premium flooring increase the investment but also the property value. Standard finishes focus on durability and clean aesthetics—perfect for low-maintenance living and strong rental returns without over-investing in a rental property."
                },
                "mid_range": { 
                    title: "Finish Level", 
                    subtitle: "Mid-Range Upgrades",
                    copy: "Your choice of finishes directly impacts the budget. Builder-grade is budget-friendly, while high-end options like custom cabinetry, stone countertops, and premium flooring increase the investment but also the property value. Mid-range is the 'sweet spot' for value—includes upgrades like LVP flooring and quartz countertops that drastically improve rental appeal and justify higher rents without breaking the budget."
                },
                "high_end": { 
                    title: "Finish Level", 
                    subtitle: "Luxury High-End Custom",
                    copy: "Your choice of finishes directly impacts the budget. Builder-grade is budget-friendly, while high-end options like custom cabinetry, stone countertops, and premium flooring increase the investment but also the property value. High-end finishes signal quality immediately to appraisers and premium tenants—custom cabinetry, stone surfaces, and designer fixtures create a luxury living experience that commands top-tier rental rates."
                }
            },

            // Q4: Site Condition
            q4: {
                "flat_access": { 
                    title: "Site Condition", 
                    subtitle: "Flat lot with easy access",
                    copy: "A flat lot with easy access for machinery and material delivery keeps preparation costs low. Sloped or difficult-to-access sites may require additional investment in grading, foundation work, and labor. Your ideal site conditions mean your budget goes 100% into build quality rather than grading, retaining walls, or access challenges."
                },
                "sloped_mod": { 
                    title: "Site Condition", 
                    subtitle: "Moderate Slope / Narrow Access",
                    copy: "A flat lot with easy access for machinery and material delivery keeps preparation costs low. Sloped or difficult-to-access sites may require additional investment in grading, foundation work, and labor. We've included necessary engineering to handle the slope safely—turning a potential challenge into a view-enhancing feature and creating opportunities for unique architectural elements."
                },
                "demo": { 
                    title: "Site Condition", 
                    subtitle: "Requires Demolition / Difficult Access",
                    copy: "A flat lot with easy access for machinery and material delivery keeps preparation costs low. Sloped or difficult-to-access sites may require additional investment in grading, foundation work, and labor. Projects requiring significant demolition or structural modifications add complexity and cost. Our team is fully equipped to handle these challenges safely and efficiently, removing the old structure to give us a clean slate for building a modern, energy-efficient unit."
                }
            },

            // Q5: Utility Connections
            q5: {
                "tie_in": { 
                    title: "Utility Connections", 
                    subtitle: "Tie-in to main house",
                    copy: "Tying into the main house utilities is the most cost-efficient strategy, saving thousands on new meter installations and trenching. New separate lines are required for some rental scenarios and provide complete independence for billing. Connecting to your main house saves on new meter fees and trenching—smart economics for owner-occupied or family-use ADUs."
                },
                "new_lines": { 
                    title: "Utility Connections", 
                    subtitle: "New separate lines to street",
                    copy: "Tying into the main house utilities is the most cost-efficient strategy, saving thousands on new meter installations and trenching. New separate lines are required for some rental scenarios and provide complete independence for billing. Complete utility independence allows you to bill tenants separately and increases the unit's standalone value—essential for professional rental operations."
                }
            },

            // Q6: Plans Status
            q6: {
                "needs_design": { 
                    title: "Design & Permitting", 
                    subtitle: "Need Design & Permitting services",
                    copy: "Having approved plans ready accelerates the timeline significantly. If design and permitting services are needed, we handle the full process while ensuring your layout perfectly fits your specific lot constraints and maximizes the allowable square footage under local zoning."
                },
                "plans_ready": { 
                    title: "Design & Permitting", 
                    subtitle: "Plans approved and ready",
                    copy: "Having approved plans ready accelerates the timeline significantly. If design and permitting services are needed, we handle the full process. Since you have plans ready, we can expedite the timeline and move straight to the bid and construction phase, potentially starting 4-6 weeks earlier than projects requiring design work."
                }
            },

            // Q7: Primary Motivation
            q7: {
                "rental": { 
                    title: "Primary Motivation", 
                    subtitle: "Generate Rental Income",
                    copy: "That's a fantastic investment strategy. We specialize in building durable, appealing ADUs that attract high-quality tenants, helping you maximize your return on investment quickly. Our builds are designed for low maintenance and high tenant satisfaction."
                },
                "family": { 
                    title: "Primary Motivation", 
                    subtitle: "Housing for Family/In-Laws",
                    copy: "Multi-generational living is becoming increasingly popular and valuable. We'll ensure your ADU provides the perfect balance of privacy and proximity, with features that support comfortable, dignified aging-in-place or young adult independence."
                },
                "office": { 
                    title: "Primary Motivation", 
                    subtitle: "Home Office / Personal Space",
                    copy: "A dedicated workspace separate from your home creates the professional environment and work-life boundaries that remote workers need. We'll design a space that inspires productivity while being just steps from your back door—and it's potentially tax-deductible if used exclusively for business."
                }
            },

            // Q8: Timeline Expectations
            q8: {
                "asap": { 
                    title: "Project Timeline", 
                    subtitle: "Start ASAP / Ready now",
                    copy: "Perfect. We have availability to start the design and permitting process right away. Let's schedule your on-site consultation to lock in your project slot and take advantage of our current incentives before our calendar fills 4-6 weeks out."
                },
                "1_3_months": { 
                    title: "Project Timeline", 
                    subtitle: "Within 1-3 months",
                    copy: "This timeline works well with our typical design and permit approval process. We can begin pre-planning now to ensure we're ready to break ground exactly when you need us, avoiding any delays from permit backlogs."
                },
                "3_6_months": { 
                    title: "Project Timeline", 
                    subtitle: "3-6 months out",
                    copy: "Planning ahead is smart. This gives us ample time to perfect the design, navigate the permit process smoothly, and schedule your project during optimal weather conditions. We can lock in current pricing and material costs well in advance."
                },
                "exploring": { 
                    title: "Project Timeline", 
                    subtitle: "Just exploring options",
                    copy: "Great! This is the perfect time to understand what's possible and get accurate numbers. There's no pressure—our job is to give you the information you need to make a confident decision when the timing is right for you."
                }
            },

            // Q9: Top Priority
            q9: {
                "price": { 
                    title: "Your Top Priority", 
                    subtitle: "Lowest Price",
                    copy: "Getting the best value is smart. We'll work with you to optimize the plan, suggesting materials and methods that provide the best quality and durability for your budget. We believe in transparent pricing with no surprises—you'll see exactly where every dollar goes and we'll identify opportunities to save without compromising on the essentials that matter most."
                },
                "value": { 
                    title: "Your Top Priority", 
                    subtitle: "Best Value (Quality/Cost Balance)",
                    copy: "This is the approach most of our clients take—and it's exactly how we build. We focus on delivering maximum quality where it counts (structure, waterproofing, systems) while being strategic about finishes and features. You get a project built to last 50+ years without paying for unnecessary upgrades that don't improve your ROI or daily living experience."
                },
                "speed": { 
                    title: "Your Top Priority", 
                    subtitle: "Speed & Quality",
                    copy: "We're known for fast builds without cutting corners—it's one of our key differentiators after 22 years in business. We have dedicated crews, established supplier relationships, and streamlined permitting processes that let us deliver quality projects in 6-9 months instead of the typical 12-18. Speed matters when you're losing rental income or need family housing quickly."
                }
            },

            // Q10: Ownership Status / Decision Making Authority
            q10: {
                "owner": { 
                    title: "Ownership Status", 
                    subtitle: "Property owner with full decision-making authority",
                    copy: "Perfect. As the sole decision-maker, we can move efficiently through the consultation and proposal process. During your on-site estimate appointment, we'll walk through all the details, answer your questions, and provide you with everything needed to make a confident decision about moving forward."
                },
                "buying": { 
                    title: "Ownership Status", 
                    subtitle: "Joint decision with spouse/partner",
                    copy: "We completely understand—major home projects require buy-in from all decision-makers. This is exactly why it's critical that both you and your spouse/partner attend the on-site estimate appointment together. We need everyone present to discuss budget, timeline, design preferences, and answer questions in real-time. Without all decision-makers present, we cannot move forward with the proposal, as it would delay the process and create miscommunication. Let's make sure everyone's calendar is aligned when we schedule."
                },
                "researching": { 
                    title: "Ownership Status", 
                    subtitle: "Researching on behalf of property owner",
                    copy: "Thank you for doing the research legwork! While we're happy to provide you with this preliminary estimate, please understand that to move forward with an official on-site consultation and detailed proposal, we'll need the actual property owner(s) present and involved. All decision-makers must attend the appointment together—this is non-negotiable, as it ensures clear communication, aligned expectations, and the ability to answer questions and make decisions in real-time without delays or miscommunication."
                }
            },

            // Q11: Electrical Panel
            q11: { 
                "upgrade": { 
                    title: "Electrical Panel", 
                    subtitle: "Main panel needs upgrade (100 Amp → 200+ Amp)",
                    copy: "Smart move. Upgrading the main panel future-proofs your entire property for EV chargers, modern appliances, and tech. This investment benefits both your main house and ADU while meeting current electrical code requirements."
                },
                "modern": { 
                    title: "Electrical Panel", 
                    subtitle: "Modern panel (200+ Amp) already installed",
                    copy: "Excellent—your existing modern panel provides plenty of capacity. We'll install a dedicated sub-panel to ensure safe, independent power distribution to your ADU without straining your main system."
                }
            },

            // Q12: Roof Style
            q12: { 
                "tile": { 
                    title: "Roof Style", 
                    subtitle: "Spanish Tile / Concrete Tile",
                    copy: "Tile roofing adds massive curb appeal and longevity—50+ year lifespan and superior fire resistance. A tile roof matches the high aesthetic of premium Southern California homes and signals quality to appraisers and tenants."
                },
                "shingle": { 
                    title: "Roof Style", 
                    subtitle: "Composition Shingle / Flat",
                    copy: "Cost-effective and reliable. Modern composition shingles offer 30+ year protection with minimal maintenance and come in a variety of colors to match your main house perfectly."
                }
            },

            // Q13: Ceiling Preference
            q13: {
                "vaulted": { 
                    title: "Ceiling Preference", 
                    subtitle: "Vaulted / Cathedral (high pitch)",
                    copy: "Dramatic impact. Vaulting the ceilings makes the unit feel significantly larger and more luxurious—creating an open, airy atmosphere that commands higher rents and impresses visitors immediately."
                },
                "standard": { 
                    title: "Ceiling Preference", 
                    subtitle: "Standard Flat (8-9ft)",
                    copy: "Efficient heating and cooling profile with a clean, modern look. Standard ceilings keep costs reasonable while still feeling spacious with proper lighting and design."
                }
            },

            // Q14: Patio Door Style
            q14: {
                "bifold": { 
                    title: "Patio Door Style", 
                    subtitle: "Large Bi-Fold / Stacking Doors",
                    copy: "A lifestyle upgrade. Bi-fold doors seamlessly blend indoor and outdoor living, effectively doubling your entertaining space and creating the California indoor-outdoor flow that premium tenants love."
                },
                "standard": { 
                    title: "Patio Door Style", 
                    subtitle: "Standard Sliding / French Doors",
                    copy: "Secure and energy-efficient entry system with excellent natural light. Standard patio doors provide great functionality and curb appeal at a practical price point."
                }
            },

            // Q15: Heating & Cooling
            q15: {
                "central": { 
                    title: "Heating & Cooling", 
                    subtitle: "Central Air (hidden ducts)",
                    copy: "The ultimate comfort choice. Central air provides silent, whole-home climate control without visible wall units—creating a clean, upscale aesthetic that premium renters expect."
                },
                "minisplit": { 
                    title: "Heating & Cooling", 
                    subtitle: "Mini-Split System (wall mounted)",
                    copy: "Highly efficient and cost-effective. Mini-splits zone the cooling so you're not wasting money cooling empty rooms, and modern units are whisper-quiet with sleek, unobtrusive designs."
                }
            },

            // Interiors
            q16: { title: "Kitchen Layout", copy: val => `Designed for an efficient ${val.replace('_',' ')} layout to maximize usability.` },
            q17: { title: "Bathrooms", copy: val => `Includes ${val.replace('_',' ')} configuration with modern waterproofing.` },
            q18: { title: "Flooring", copy: val => `Installation of durable ${val.replace('_',' ')} flooring throughout main areas.` },
            q19: { title: "Windows", copy: val => `Energy-efficient ${val} windows to meet Title 24 requirements.` }
        };
        
        // --- 3. INIT ---
        (function init() {
            renderBreakdown();
            calculateQuote(); // Run offline first
            
            // Fetch Live Pricing
            fetch(WEBHOOK_URL + "?type=pricing")
                .then(res => res.json())
                .then(data => {
                    if(!data.error) {
                        PRICING = { ...PRICING, ...data };
                        calculateQuote();
                    }
                })
                .catch(console.error);
        })();

        // --- 4. BREAKDOWN RENDERER ---
        function renderBreakdown() {
            const container = document.getElementById('breakdown');
            let html = '';

            // Helper to get text
            const getDesc = (key, val) => {
                if(!descriptions[key]) return null;
                
                // Handle function-based descriptions (like q2)
                if(typeof descriptions[key].copy === 'function') {
                    return { 
                        title: descriptions[key].title,
                        subtitle: typeof descriptions[key].subtitle === 'function' 
                            ? descriptions[key].subtitle(val) 
                            : descriptions[key].subtitle,
                        copy: descriptions[key].copy(val) 
                    };
                }
                
                // Handle object-based descriptions (most questions)
                const desc = descriptions[key][val];
                if(!desc) return null;
                
                return { 
                    title: desc.title,
                    subtitle: desc.subtitle,
                    copy: desc.copy 
                };
            };

            // Iterate Q1 - Q15
            for(let i=1; i<=15; i++) {
                const key = 'q' + i;
                const val = inputs[key];
                if(!val) continue;

                const data = getDesc(key, val);
                if(!data) continue;
                
                html += `
                <div class="glass-panel p-6 rounded-xl border-l-4 border-blue-500 mb-4 transition-all hover:shadow-xl hover:border-blue-400">
                    <div class="flex items-start gap-4">
                        <div class="bg-blue-600/20 p-3 rounded-full shrink-0 mt-1">
                            <i class="fas fa-check text-blue-400 text-lg"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-bold text-white mb-1">${data.title}</h3>
                            <div class="flex items-center gap-2 mb-3">
                                <span class="text-sm text-slate-400 uppercase tracking-wide">Your Input:</span>
                                <span class="text-blue-300 font-semibold">${data.subtitle || val}</span>
                            </div>
                            <p class="text-slate-300 leading-relaxed">${data.copy}</p>
                        </div>
                    </div>
                </div>`;
            }
            
            container.innerHTML = html;
        }

        // --- 5. CALCULATION LOGIC (Enhanced Range) ---
        function calculateQuote() {
            try {
                // Inputs
                const sqft = parseInt(inputs.q2) || 600;
                const aduType = inputs.q1 || 'detached';
                const finish = inputs.q3 || 'standard';
                const site = inputs.q4 || 'flat_access';
                const util = inputs.q5 || 'tie_in';
                const plans = inputs.q6 || 'needs_design';

                // Base
                let baseRate = PRICING.base_sqft_detached;
                if(aduType === 'garage_conversion') baseRate = PRICING.base_sqft_garage;
                if(aduType === 'attached') baseRate = PRICING.base_sqft_attached;

                // Tight Range Logic (Low * 1.0 vs Low * 1.15 for High)
                // Adjust per your preference. Standard construction variance is usually 10-15%.
                let costLow = sqft * baseRate;
                let costHigh = costLow * 1.15; // 15% Gap (Tighter than 30%)

                // Finish Multipliers
                if(finish === 'mid_range') { costLow *= PRICING.finish_mid_markup; costHigh *= PRICING.finish_mid_markup; }
                if(finish === 'high_end') { costLow *= PRICING.finish_high_markup; costHigh *= PRICING.finish_high_markup; }

                // Add-ons (Apply to both Low & High)
                const add = (amt) => { costLow += amt; costHigh += (amt * 1.1); }; // Slight variance on upgrades

                if(site === 'sloped_mod') add(parseInt(PRICING.site_slope_mod));
                if(site === 'demo') add(parseInt(PRICING.site_demo));
                
                if(util === 'new_lines') add(parseInt(PRICING.util_new_lines));
                else add(parseInt(PRICING.util_tie_in));

                if(inputs.q11 === 'upgrade') add(parseInt(PRICING.panel_upgrade));
                if(inputs.q12 === 'tile') add(sqft * PRICING.roof_tile_sqft);
                if(inputs.q13 === 'vaulted') add(sqft * PRICING.ceil_vault_sqft);
                if(inputs.q14 === 'bifold') add(parseInt(PRICING.door_bifold));
                if(inputs.q15 === 'central') add(parseInt(PRICING.hvac_central));

                // Soft Costs
                let soft = parseInt(PRICING.permit_fees);
                if(plans === 'needs_design') soft += parseInt(PRICING.plans_soft_cost);
                
                costLow += soft;
                costHigh += soft;

                // Rounding
                const lowFinal = Math.round(costLow / 1000) * 1000;
                const highFinal = Math.round(costHigh / 1000) * 1000;

                // Display
                document.getElementById('loadingPrice').style.display = 'none';
                document.getElementById('priceDisplay').classList.remove('hidden');
                document.getElementById('lowPrice').innerText = lowFinal.toLocaleString();
                document.getElementById('highPrice').innerText = highFinal.toLocaleString();

            } catch(e) {
                console.error("Calc Error", e);
            }
        }
    </script>
</body>
</html>
